echo "ğŸ¥ Checking for new/updated videos to compress..."

# Check if there are any MP4 files in the videos directory
if [ -d "public/videos" ]; then
  # Check if there are any .mp4 files staged for commit
  if git diff --cached --name-only | grep -q "public/videos/.*\.mp4$"; then
    echo "ğŸ“¹ Found MP4 files staged for commit"
    echo "ğŸ¬ Running video compression..."
    npm run compress:videos

    # Add compressed videos back to staging area
    git add public/videos/*.mp4

    echo "âœ… Video compression completed and files staged"
  else
    echo "â­ï¸  No MP4 files found in staged changes"
  fi
else
  echo "â­ï¸  No videos directory found"
fi